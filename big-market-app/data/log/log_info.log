25-01-02.11:02:42.365 [main            ] INFO  RaffleActivityControllerTest - Starting RaffleActivityControllerTest using Java 1.8.0_432 on DESKTOP-IPVV05H with PID 35312 (started by 田硕 in D:\Java\Code\big-market\big-market-app)
25-01-02.11:02:42.367 [main            ] INFO  RaffleActivityControllerTest - The following 1 profile is active: "dev"
25-01-02.11:02:46.423 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
25-01-02.11:02:46.427 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
25-01-02.11:02:46.494 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 44 ms. Found 0 Redis repository interfaces.
25-01-02.11:02:48.125 [main            ] INFO  Version                - Redisson 3.23.4
25-01-02.11:02:49.166 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
25-01-02.11:02:49.183 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
25-01-02.11:02:52.701 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
25-01-02.11:02:52.793 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
25-01-02.11:02:52.916 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#5a4c98d7:0/SimpleConnection@5de335cf [delegate=amqp://admin@127.0.0.1:5672/, localPort= 6235]
25-01-02.11:02:53.066 [main            ] INFO  RaffleActivityControllerTest - Started RaffleActivityControllerTest in 11.369 seconds (JVM running for 12.77)
25-01-02.11:02:53.318 [main            ] INFO  RaffleActivityController - 装配活动数据预热，开始 activityId:100301
25-01-02.11:02:53.346 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-01-02.11:02:53.603 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-01-02.11:02:53.727 [main            ] INFO  StrategyArmoryDispatch - 查询策略完毕
25-01-02.11:02:53.728 [main            ] INFO  StrategyArmoryDispatch - 最小的概率为：0.0200
25-01-02.11:02:53.729 [main            ] INFO  StrategyArmoryDispatch - 概率值的总和：0.2300
25-01-02.11:02:53.729 [main            ] INFO  StrategyArmoryDispatch - 概率范围为：12
25-01-02.11:02:53.729 [main            ] INFO  StrategyArmoryDispatch - 打乱集合
25-01-02.11:02:53.740 [main            ] INFO  StrategyArmoryDispatch - 已经持久化
25-01-02.11:02:53.754 [main            ] INFO  StrategyArmoryDispatch - 查询策略完毕
25-01-02.11:02:53.754 [main            ] INFO  StrategyArmoryDispatch - 最小的概率为：0.0300
25-01-02.11:02:53.754 [main            ] INFO  StrategyArmoryDispatch - 概率值的总和：0.0600
25-01-02.11:02:53.754 [main            ] INFO  StrategyArmoryDispatch - 概率范围为：2
25-01-02.11:02:53.754 [main            ] INFO  StrategyArmoryDispatch - 打乱集合
25-01-02.11:02:53.757 [main            ] INFO  StrategyArmoryDispatch - 已经持久化
25-01-02.11:02:53.757 [main            ] INFO  StrategyArmoryDispatch - 查询策略完毕
25-01-02.11:02:53.757 [main            ] INFO  StrategyArmoryDispatch - 最小的概率为：0.0300
25-01-02.11:02:53.757 [main            ] INFO  StrategyArmoryDispatch - 概率值的总和：0.0600
25-01-02.11:02:53.757 [main            ] INFO  StrategyArmoryDispatch - 概率范围为：2
25-01-02.11:02:53.757 [main            ] INFO  StrategyArmoryDispatch - 打乱集合
25-01-02.11:02:53.760 [main            ] INFO  StrategyArmoryDispatch - 已经持久化
25-01-02.11:02:53.761 [main            ] INFO  StrategyArmoryDispatch - 查询策略完毕
25-01-02.11:02:53.761 [main            ] INFO  StrategyArmoryDispatch - 最小的概率为：0.0300
25-01-02.11:02:53.761 [main            ] INFO  StrategyArmoryDispatch - 概率值的总和：0.0600
25-01-02.11:02:53.761 [main            ] INFO  StrategyArmoryDispatch - 概率范围为：2
25-01-02.11:02:53.761 [main            ] INFO  StrategyArmoryDispatch - 打乱集合
25-01-02.11:02:53.763 [main            ] INFO  StrategyArmoryDispatch - 已经持久化
25-01-02.11:02:53.765 [main            ] INFO  RaffleActivityController - 活动装配，数据预热，完成 activityId:100301
25-01-02.11:02:53.941 [main            ] INFO  RaffleActivityControllerTest - 测试结果：{"code":"0000","data":true,"info":"成功"}
25-01-02.11:02:53.942 [main            ] INFO  RaffleActivityController - 活动抽奖 userId:user001 activityId:100301
25-01-02.11:02:53.975 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-01-02.11:02:53.994 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-01-02.11:02:54.046 [main            ] INFO  RaffleActivityController - 活动抽奖，创建订单 userId:user001 activityId:100301 orderId:485263378445
25-01-02.11:02:54.050 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: user001 strategyId: 100006 ruleModel: rule_blacklist
25-01-02.11:02:54.068 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单接管 userId: user001 strategyId: 100006 ruleModel: rule_blacklist
25-01-02.11:02:54.068 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 user001 100006 101 rule_blacklist
25-01-02.11:02:54.107 [main            ] INFO  EventPublisher         - 发送MQ消息 topic:send_award message:{"data":{"awardConfig":"0.01,1","awardTitle":"随机积分","orderId":"485263378445","userId":"user001"},"id":"24436734239","timestamp":1735786974075}
25-01-02.11:02:54.121 [main            ] INFO  RaffleActivityControllerTest - 请求参数：{"activityId":100301,"userId":"user001"}
25-01-02.11:02:54.123 [main            ] INFO  RaffleActivityControllerTest - 测试结果：{"code":"0000","data":{"awardId":101,"awardIndex":1,"awardTitle":"随机积分"},"info":"成功"}
25-01-02.11:02:54.128 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"data":{"awardConfig":"0.01,1","awardTitle":"随机积分","orderId":"485263378445","userId":"user001"},"id":"24436734239","timestamp":1735786974075}
25-01-02.11:02:54.162 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-1] ERROR AwardService           - 分发奖品，奖品ID不存在。awardKey:null
25-01-02.11:02:55.001 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:02:55.005 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:02:55.009 [pool-3-thread-1 ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-01-02.11:02:55.024 [pool-3-thread-1 ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-01-02.11:03:00.007 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:03:00.010 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:03:05.011 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:03:05.013 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:03:10.011 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:03:10.013 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:03:15.013 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:03:15.015 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:03:20.001 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:03:20.003 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:03:25.006 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:03:25.009 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:03:30.007 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:03:30.009 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:03:30.138 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-01-02.11:03:30.140 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-01-02.11:03:30.141 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-01-02.11:03:30.322 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-01-02.11:03:30.322 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-01-02.11:03:30.459 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-01-02.11:03:30.462 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-01-02.11:03:30.463 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-01-02.11:03:30.463 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-01-02.11:04:58.329 [main            ] INFO  RaffleActivityControllerTest - Starting RaffleActivityControllerTest using Java 1.8.0_432 on DESKTOP-IPVV05H with PID 48528 (started by 田硕 in D:\Java\Code\big-market\big-market-app)
25-01-02.11:04:58.333 [main            ] INFO  RaffleActivityControllerTest - The following 1 profile is active: "dev"
25-01-02.11:04:59.587 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
25-01-02.11:04:59.594 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
25-01-02.11:04:59.650 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 29 ms. Found 0 Redis repository interfaces.
25-01-02.11:05:02.390 [main            ] INFO  Version                - Redisson 3.23.4
25-01-02.11:05:03.806 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
25-01-02.11:05:03.826 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
25-01-02.11:05:08.340 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
25-01-02.11:05:08.469 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
25-01-02.11:05:08.553 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#762405bf:0/SimpleConnection@10e8c7a2 [delegate=amqp://admin@127.0.0.1:5672/, localPort= 8183]
25-01-02.11:05:08.684 [main            ] INFO  RaffleActivityControllerTest - Started RaffleActivityControllerTest in 11.409 seconds (JVM running for 13.566)
25-01-02.11:05:09.125 [main            ] INFO  RaffleActivityController - 装配活动数据预热，开始 activityId:100301
25-01-02.11:05:09.173 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-01-02.11:05:09.664 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-01-02.11:05:09.907 [main            ] INFO  StrategyArmoryDispatch - 查询策略完毕
25-01-02.11:05:09.910 [main            ] INFO  StrategyArmoryDispatch - 最小的概率为：0.0200
25-01-02.11:05:09.912 [main            ] INFO  StrategyArmoryDispatch - 概率值的总和：0.2300
25-01-02.11:05:09.912 [main            ] INFO  StrategyArmoryDispatch - 概率范围为：12
25-01-02.11:05:09.912 [main            ] INFO  StrategyArmoryDispatch - 打乱集合
25-01-02.11:05:09.923 [main            ] INFO  StrategyArmoryDispatch - 已经持久化
25-01-02.11:05:09.941 [main            ] INFO  StrategyArmoryDispatch - 查询策略完毕
25-01-02.11:05:09.941 [main            ] INFO  StrategyArmoryDispatch - 最小的概率为：0.0300
25-01-02.11:05:09.941 [main            ] INFO  StrategyArmoryDispatch - 概率值的总和：0.0600
25-01-02.11:05:09.941 [main            ] INFO  StrategyArmoryDispatch - 概率范围为：2
25-01-02.11:05:09.941 [main            ] INFO  StrategyArmoryDispatch - 打乱集合
25-01-02.11:05:09.944 [main            ] INFO  StrategyArmoryDispatch - 已经持久化
25-01-02.11:05:09.944 [main            ] INFO  StrategyArmoryDispatch - 查询策略完毕
25-01-02.11:05:09.944 [main            ] INFO  StrategyArmoryDispatch - 最小的概率为：0.0300
25-01-02.11:05:09.944 [main            ] INFO  StrategyArmoryDispatch - 概率值的总和：0.0600
25-01-02.11:05:09.944 [main            ] INFO  StrategyArmoryDispatch - 概率范围为：2
25-01-02.11:05:09.944 [main            ] INFO  StrategyArmoryDispatch - 打乱集合
25-01-02.11:05:09.947 [main            ] INFO  StrategyArmoryDispatch - 已经持久化
25-01-02.11:05:09.948 [main            ] INFO  StrategyArmoryDispatch - 查询策略完毕
25-01-02.11:05:09.948 [main            ] INFO  StrategyArmoryDispatch - 最小的概率为：0.0300
25-01-02.11:05:09.948 [main            ] INFO  StrategyArmoryDispatch - 概率值的总和：0.0600
25-01-02.11:05:09.948 [main            ] INFO  StrategyArmoryDispatch - 概率范围为：2
25-01-02.11:05:09.948 [main            ] INFO  StrategyArmoryDispatch - 打乱集合
25-01-02.11:05:09.955 [main            ] INFO  StrategyArmoryDispatch - 已经持久化
25-01-02.11:05:09.958 [main            ] INFO  RaffleActivityController - 活动装配，数据预热，完成 activityId:100301
25-01-02.11:05:10.015 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:05:10.020 [pool-3-thread-1 ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-01-02.11:05:10.020 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-01-02.11:05:10.027 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:05:10.045 [pool-3-thread-1 ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-01-02.11:05:10.045 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-01-02.11:05:10.198 [main            ] INFO  RaffleActivityControllerTest - 测试结果：{"code":"0000","data":true,"info":"成功"}
25-01-02.11:05:17.207 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:05:17.208 [main            ] INFO  RaffleActivityController - 活动抽奖 userId:user001 activityId:100301
25-01-02.11:05:17.210 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:05:17.328 [main            ] INFO  RaffleActivityController - 活动抽奖，创建订单 userId:user001 activityId:100301 orderId:858889850850
25-01-02.11:05:17.335 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: user001 strategyId: 100006 ruleModel: rule_blacklist
25-01-02.11:05:17.388 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单接管 userId: user001 strategyId: 100006 ruleModel: rule_blacklist
25-01-02.11:05:17.390 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 user001 100006 101 rule_blacklist
25-01-02.11:05:17.468 [main            ] INFO  EventPublisher         - 发送MQ消息 topic:send_award message:{"data":{"awardConfig":"0.01,1","awardTitle":"随机积分","orderId":"858889850850","userId":"user001"},"id":"32961338626","timestamp":1735787117402}
25-01-02.11:05:17.487 [main            ] INFO  RaffleActivityControllerTest - 请求参数：{"activityId":100301,"userId":"user001"}
25-01-02.11:05:17.490 [main            ] INFO  RaffleActivityControllerTest - 测试结果：{"code":"0000","data":{"awardId":101,"awardIndex":1,"awardTitle":"随机积分"},"info":"成功"}
25-01-02.11:05:17.492 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"data":{"awardConfig":"0.01,1","awardTitle":"随机积分","orderId":"858889850850","userId":"user001"},"id":"32961338626","timestamp":1735787117402}
25-01-02.11:06:47.494 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-1] ERROR AwardService           - 分发奖品，奖品ID不存在。awardKey:null
25-01-02.11:06:47.494 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=1m37s340ms734µs).
25-01-02.11:06:47.494 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=1m37s723ms895µs400ns).
25-01-02.11:06:47.494 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=1m37s340ms734µs).
25-01-02.11:06:47.495 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:06:47.500 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:06:47.542 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-01-02.11:06:47.543 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-01-02.11:06:47.544 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-01-02.11:06:48.507 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-01-02.11:06:48.507 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-01-02.11:06:48.507 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-01-02.11:06:48.509 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-01-02.11:06:48.510 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-01-02.11:06:48.510 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-01-02.11:06:53.162 [main            ] INFO  RaffleActivityControllerTest - Starting RaffleActivityControllerTest using Java 1.8.0_432 on DESKTOP-IPVV05H with PID 12600 (started by 田硕 in D:\Java\Code\big-market\big-market-app)
25-01-02.11:06:53.164 [main            ] INFO  RaffleActivityControllerTest - The following 1 profile is active: "dev"
25-01-02.11:06:54.411 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
25-01-02.11:06:54.416 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
25-01-02.11:06:54.471 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 29 ms. Found 0 Redis repository interfaces.
25-01-02.11:06:57.161 [main            ] INFO  Version                - Redisson 3.23.4
25-01-02.11:06:58.545 [redisson-netty-2-5] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
25-01-02.11:06:58.562 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
25-01-02.11:07:03.189 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
25-01-02.11:07:03.324 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
25-01-02.11:07:03.417 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#5103eea2:0/SimpleConnection@6ab1f85b [delegate=amqp://admin@127.0.0.1:5672/, localPort= 2448]
25-01-02.11:07:03.541 [main            ] INFO  RaffleActivityControllerTest - Started RaffleActivityControllerTest in 11.562 seconds (JVM running for 13.189)
25-01-02.11:07:03.987 [main            ] INFO  RaffleActivityController - 装配活动数据预热，开始 activityId:100301
25-01-02.11:07:04.036 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-01-02.11:07:04.539 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-01-02.11:07:04.773 [main            ] INFO  StrategyArmoryDispatch - 查询策略完毕
25-01-02.11:07:04.776 [main            ] INFO  StrategyArmoryDispatch - 最小的概率为：0.0200
25-01-02.11:07:04.778 [main            ] INFO  StrategyArmoryDispatch - 概率值的总和：0.2300
25-01-02.11:07:04.778 [main            ] INFO  StrategyArmoryDispatch - 概率范围为：12
25-01-02.11:07:04.778 [main            ] INFO  StrategyArmoryDispatch - 打乱集合
25-01-02.11:07:04.788 [main            ] INFO  StrategyArmoryDispatch - 已经持久化
25-01-02.11:07:04.806 [main            ] INFO  StrategyArmoryDispatch - 查询策略完毕
25-01-02.11:07:04.806 [main            ] INFO  StrategyArmoryDispatch - 最小的概率为：0.0300
25-01-02.11:07:04.806 [main            ] INFO  StrategyArmoryDispatch - 概率值的总和：0.0600
25-01-02.11:07:04.806 [main            ] INFO  StrategyArmoryDispatch - 概率范围为：2
25-01-02.11:07:04.806 [main            ] INFO  StrategyArmoryDispatch - 打乱集合
25-01-02.11:07:04.810 [main            ] INFO  StrategyArmoryDispatch - 已经持久化
25-01-02.11:07:04.810 [main            ] INFO  StrategyArmoryDispatch - 查询策略完毕
25-01-02.11:07:04.810 [main            ] INFO  StrategyArmoryDispatch - 最小的概率为：0.0300
25-01-02.11:07:04.810 [main            ] INFO  StrategyArmoryDispatch - 概率值的总和：0.0600
25-01-02.11:07:04.810 [main            ] INFO  StrategyArmoryDispatch - 概率范围为：2
25-01-02.11:07:04.810 [main            ] INFO  StrategyArmoryDispatch - 打乱集合
25-01-02.11:07:04.814 [main            ] INFO  StrategyArmoryDispatch - 已经持久化
25-01-02.11:07:04.814 [main            ] INFO  StrategyArmoryDispatch - 查询策略完毕
25-01-02.11:07:04.814 [main            ] INFO  StrategyArmoryDispatch - 最小的概率为：0.0300
25-01-02.11:07:04.814 [main            ] INFO  StrategyArmoryDispatch - 概率值的总和：0.0600
25-01-02.11:07:04.814 [main            ] INFO  StrategyArmoryDispatch - 概率范围为：2
25-01-02.11:07:04.815 [main            ] INFO  StrategyArmoryDispatch - 打乱集合
25-01-02.11:07:04.824 [main            ] INFO  StrategyArmoryDispatch - 已经持久化
25-01-02.11:07:04.828 [main            ] INFO  RaffleActivityController - 活动装配，数据预热，完成 activityId:100301
25-01-02.11:07:05.013 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:07:05.023 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:07:05.032 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-01-02.11:07:05.032 [pool-3-thread-1 ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-01-02.11:07:05.059 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-01-02.11:07:05.060 [pool-3-thread-1 ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-01-02.11:07:05.084 [main            ] INFO  RaffleActivityControllerTest - 测试结果：{"code":"0000","data":true,"info":"成功"}
25-01-02.11:07:08.237 [main            ] INFO  RaffleActivityController - 活动抽奖 userId:user001 activityId:100301
25-01-02.11:07:08.361 [main            ] INFO  RaffleActivityController - 活动抽奖，创建订单 userId:user001 activityId:100301 orderId:656066547728
25-01-02.11:07:08.368 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: user001 strategyId: 100006 ruleModel: rule_blacklist
25-01-02.11:07:08.421 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单接管 userId: user001 strategyId: 100006 ruleModel: rule_blacklist
25-01-02.11:07:08.424 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 user001 100006 101 rule_blacklist
25-01-02.11:07:08.516 [main            ] INFO  EventPublisher         - 发送MQ消息 topic:send_award message:{"data":{"awardConfig":"0.01,1","awardTitle":"随机积分","orderId":"656066547728","userId":"user001"},"id":"84107015371","timestamp":1735787228436}
25-01-02.11:07:08.540 [main            ] INFO  RaffleActivityControllerTest - 请求参数：{"activityId":100301,"userId":"user001"}
25-01-02.11:07:08.544 [main            ] INFO  RaffleActivityControllerTest - 测试结果：{"code":"0000","data":{"awardId":101,"awardIndex":1,"awardTitle":"随机积分"},"info":"成功"}
25-01-02.11:07:08.546 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"data":{"awardConfig":"0.01,1","awardTitle":"随机积分","orderId":"656066547728","userId":"user001"},"id":"84107015371","timestamp":1735787228436}
25-01-02.11:08:53.967 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:08:53.968 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=1m45s729ms713µs500ns).
25-01-02.11:08:53.968 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=1m45s729ms734µs200ns).
25-01-02.11:08:53.968 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=1m49s322ms979µs).
25-01-02.11:08:53.973 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:08:53.978 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-1] ERROR AwardService           - 分发奖品，奖品ID不存在。awardKey:null
25-01-02.11:08:54.016 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-01-02.11:08:54.018 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-01-02.11:08:54.019 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-01-02.11:08:54.979 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-01-02.11:08:54.979 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-01-02.11:08:54.991 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-01-02.11:08:54.994 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-01-02.11:08:54.994 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-01-02.11:08:54.994 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-01-02.11:08:59.922 [main            ] INFO  RaffleActivityControllerTest - Starting RaffleActivityControllerTest using Java 1.8.0_432 on DESKTOP-IPVV05H with PID 37724 (started by 田硕 in D:\Java\Code\big-market\big-market-app)
25-01-02.11:08:59.925 [main            ] INFO  RaffleActivityControllerTest - The following 1 profile is active: "dev"
25-01-02.11:09:01.124 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
25-01-02.11:09:01.130 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
25-01-02.11:09:01.185 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 30 ms. Found 0 Redis repository interfaces.
25-01-02.11:09:03.923 [main            ] INFO  Version                - Redisson 3.23.4
25-01-02.11:09:05.292 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
25-01-02.11:09:05.308 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
25-01-02.11:09:10.342 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
25-01-02.11:09:10.497 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
25-01-02.11:09:10.593 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#762405bf:0/SimpleConnection@10e8c7a2 [delegate=amqp://admin@127.0.0.1:5672/, localPort= 2773]
25-01-02.11:09:10.727 [main            ] INFO  RaffleActivityControllerTest - Started RaffleActivityControllerTest in 11.916 seconds (JVM running for 13.608)
25-01-02.11:09:11.239 [main            ] INFO  RaffleActivityController - 装配活动数据预热，开始 activityId:100301
25-01-02.11:09:11.299 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-01-02.11:09:11.898 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-01-02.11:09:12.176 [main            ] INFO  StrategyArmoryDispatch - 查询策略完毕
25-01-02.11:09:12.178 [main            ] INFO  StrategyArmoryDispatch - 最小的概率为：0.0200
25-01-02.11:09:12.180 [main            ] INFO  StrategyArmoryDispatch - 概率值的总和：0.2300
25-01-02.11:09:12.181 [main            ] INFO  StrategyArmoryDispatch - 概率范围为：12
25-01-02.11:09:12.181 [main            ] INFO  StrategyArmoryDispatch - 打乱集合
25-01-02.11:09:12.191 [main            ] INFO  StrategyArmoryDispatch - 已经持久化
25-01-02.11:09:12.206 [main            ] INFO  StrategyArmoryDispatch - 查询策略完毕
25-01-02.11:09:12.206 [main            ] INFO  StrategyArmoryDispatch - 最小的概率为：0.0300
25-01-02.11:09:12.206 [main            ] INFO  StrategyArmoryDispatch - 概率值的总和：0.0600
25-01-02.11:09:12.206 [main            ] INFO  StrategyArmoryDispatch - 概率范围为：2
25-01-02.11:09:12.206 [main            ] INFO  StrategyArmoryDispatch - 打乱集合
25-01-02.11:09:12.209 [main            ] INFO  StrategyArmoryDispatch - 已经持久化
25-01-02.11:09:12.209 [main            ] INFO  StrategyArmoryDispatch - 查询策略完毕
25-01-02.11:09:12.209 [main            ] INFO  StrategyArmoryDispatch - 最小的概率为：0.0300
25-01-02.11:09:12.209 [main            ] INFO  StrategyArmoryDispatch - 概率值的总和：0.0600
25-01-02.11:09:12.209 [main            ] INFO  StrategyArmoryDispatch - 概率范围为：2
25-01-02.11:09:12.209 [main            ] INFO  StrategyArmoryDispatch - 打乱集合
25-01-02.11:09:12.212 [main            ] INFO  StrategyArmoryDispatch - 已经持久化
25-01-02.11:09:12.212 [main            ] INFO  StrategyArmoryDispatch - 查询策略完毕
25-01-02.11:09:12.212 [main            ] INFO  StrategyArmoryDispatch - 最小的概率为：0.0300
25-01-02.11:09:12.212 [main            ] INFO  StrategyArmoryDispatch - 概率值的总和：0.0600
25-01-02.11:09:12.212 [main            ] INFO  StrategyArmoryDispatch - 概率范围为：2
25-01-02.11:09:12.212 [main            ] INFO  StrategyArmoryDispatch - 打乱集合
25-01-02.11:09:12.220 [main            ] INFO  StrategyArmoryDispatch - 已经持久化
25-01-02.11:09:12.224 [main            ] INFO  RaffleActivityController - 活动装配，数据预热，完成 activityId:100301
25-01-02.11:09:12.450 [main            ] INFO  RaffleActivityControllerTest - 测试结果：{"code":"0000","data":true,"info":"成功"}
25-01-02.11:09:16.102 [main            ] INFO  RaffleActivityController - 活动抽奖 userId:user001 activityId:100301
25-01-02.11:09:16.103 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:09:16.108 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-01-02.11:09:16.108 [pool-3-thread-1 ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-01-02.11:09:16.108 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:09:16.129 [pool-3-thread-1 ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-01-02.11:09:16.129 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-01-02.11:09:16.184 [main            ] INFO  RaffleActivityController - 活动抽奖，创建订单 userId:user001 activityId:100301 orderId:025739938331
25-01-02.11:09:16.187 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: user001 strategyId: 100006 ruleModel: rule_blacklist
25-01-02.11:09:16.205 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单接管 userId: user001 strategyId: 100006 ruleModel: rule_blacklist
25-01-02.11:09:16.206 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 user001 100006 101 rule_blacklist
25-01-02.11:09:34.769 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:09:34.769 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=48s640ms247µs200ns).
25-01-02.11:09:34.769 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=48s640ms219µs800ns).
25-01-02.11:09:34.771 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:10:08.953 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=56s946ms423µs400ns).
25-01-02.11:10:08.954 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:10:09.009 [main            ] INFO  EventPublisher         - 发送MQ消息 topic:send_award message:{"data":{"awardConfig":"0.01,1","awardTitle":"随机积分","orderId":"025739938331","userId":"user001"},"id":"83363509299","timestamp":1735787408957}
25-01-02.11:10:09.021 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"data":{"awardConfig":"0.01,1","awardTitle":"随机积分","orderId":"025739938331","userId":"user001"},"id":"83363509299","timestamp":1735787408957}
25-01-02.11:10:09.024 [main            ] INFO  RaffleActivityControllerTest - 请求参数：{"activityId":100301,"userId":"user001"}
25-01-02.11:10:09.027 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-01-02.11:10:09.028 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-01-02.11:10:09.029 [main            ] INFO  RaffleActivityControllerTest - 测试结果：{"code":"0000","data":{"awardId":101,"awardIndex":1,"awardTitle":"随机积分"},"info":"成功"}
25-01-02.11:10:09.029 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-01-02.11:10:09.062 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-1] ERROR AwardService           - 分发奖品，奖品ID不存在。awardKey:null
25-01-02.11:10:09.068 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-01-02.11:10:09.965 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-01-02.11:10:09.965 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-01-02.11:10:09.981 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-01-02.11:10:09.981 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-01-02.11:10:09.981 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-01-02.11:10:17.887 [main            ] INFO  RaffleActivityControllerTest - Starting RaffleActivityControllerTest using Java 1.8.0_432 on DESKTOP-IPVV05H with PID 52692 (started by 田硕 in D:\Java\Code\big-market\big-market-app)
25-01-02.11:10:17.888 [main            ] INFO  RaffleActivityControllerTest - The following 1 profile is active: "dev"
25-01-02.11:10:19.056 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
25-01-02.11:10:19.058 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
25-01-02.11:10:19.101 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 29 ms. Found 0 Redis repository interfaces.
25-01-02.11:10:21.231 [main            ] INFO  Version                - Redisson 3.23.4
25-01-02.11:10:22.493 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
25-01-02.11:10:22.513 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
25-01-02.11:10:26.300 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
25-01-02.11:10:26.395 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
25-01-02.11:10:26.473 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#762405bf:0/SimpleConnection@10e8c7a2 [delegate=amqp://admin@127.0.0.1:5672/, localPort= 5935]
25-01-02.11:10:26.595 [main            ] INFO  RaffleActivityControllerTest - Started RaffleActivityControllerTest in 9.114 seconds (JVM running for 10.087)
25-01-02.11:10:26.804 [main            ] INFO  RaffleActivityController - 装配活动数据预热，开始 activityId:100301
25-01-02.11:10:26.830 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-01-02.11:10:27.071 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-01-02.11:10:27.276 [main            ] INFO  StrategyArmoryDispatch - 查询策略完毕
25-01-02.11:10:27.277 [main            ] INFO  StrategyArmoryDispatch - 最小的概率为：0.0200
25-01-02.11:10:27.279 [main            ] INFO  StrategyArmoryDispatch - 概率值的总和：0.2300
25-01-02.11:10:27.279 [main            ] INFO  StrategyArmoryDispatch - 概率范围为：12
25-01-02.11:10:27.279 [main            ] INFO  StrategyArmoryDispatch - 打乱集合
25-01-02.11:10:27.288 [main            ] INFO  StrategyArmoryDispatch - 已经持久化
25-01-02.11:10:27.302 [main            ] INFO  StrategyArmoryDispatch - 查询策略完毕
25-01-02.11:10:27.302 [main            ] INFO  StrategyArmoryDispatch - 最小的概率为：0.0300
25-01-02.11:10:27.302 [main            ] INFO  StrategyArmoryDispatch - 概率值的总和：0.0600
25-01-02.11:10:27.302 [main            ] INFO  StrategyArmoryDispatch - 概率范围为：2
25-01-02.11:10:27.302 [main            ] INFO  StrategyArmoryDispatch - 打乱集合
25-01-02.11:10:27.305 [main            ] INFO  StrategyArmoryDispatch - 已经持久化
25-01-02.11:10:27.305 [main            ] INFO  StrategyArmoryDispatch - 查询策略完毕
25-01-02.11:10:27.305 [main            ] INFO  StrategyArmoryDispatch - 最小的概率为：0.0300
25-01-02.11:10:27.305 [main            ] INFO  StrategyArmoryDispatch - 概率值的总和：0.0600
25-01-02.11:10:27.305 [main            ] INFO  StrategyArmoryDispatch - 概率范围为：2
25-01-02.11:10:27.305 [main            ] INFO  StrategyArmoryDispatch - 打乱集合
25-01-02.11:10:27.309 [main            ] INFO  StrategyArmoryDispatch - 已经持久化
25-01-02.11:10:27.309 [main            ] INFO  StrategyArmoryDispatch - 查询策略完毕
25-01-02.11:10:27.309 [main            ] INFO  StrategyArmoryDispatch - 最小的概率为：0.0300
25-01-02.11:10:27.309 [main            ] INFO  StrategyArmoryDispatch - 概率值的总和：0.0600
25-01-02.11:10:27.309 [main            ] INFO  StrategyArmoryDispatch - 概率范围为：2
25-01-02.11:10:27.310 [main            ] INFO  StrategyArmoryDispatch - 打乱集合
25-01-02.11:10:27.316 [main            ] INFO  StrategyArmoryDispatch - 已经持久化
25-01-02.11:10:27.318 [main            ] INFO  RaffleActivityController - 活动装配，数据预热，完成 activityId:100301
25-01-02.11:10:27.516 [main            ] INFO  RaffleActivityControllerTest - 测试结果：{"code":"0000","data":true,"info":"成功"}
25-01-02.11:10:27.517 [main            ] INFO  RaffleActivityController - 活动抽奖 userId:user001 activityId:100301
25-01-02.11:10:27.531 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-01-02.11:10:27.555 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-01-02.11:10:27.611 [main            ] INFO  RaffleActivityController - 活动抽奖，创建订单 userId:user001 activityId:100301 orderId:536055104569
25-01-02.11:10:27.616 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: user001 strategyId: 100006 ruleModel: rule_blacklist
25-01-02.11:10:27.643 [main            ] INFO  BackListLogicChain     - 抽奖责任链-黑名单接管 userId: user001 strategyId: 100006 ruleModel: rule_blacklist
25-01-02.11:10:27.644 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 user001 100006 101 rule_blacklist
25-01-02.11:10:31.284 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:10:31.787 [pool-3-thread-1 ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-01-02.11:10:31.788 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:10:31.809 [pool-3-thread-1 ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-01-02.11:10:31.834 [main            ] INFO  EventPublisher         - 发送MQ消息 topic:send_award message:{"data":{"awardConfig":"0.01,1","awardId":101,"awardTitle":"随机积分","orderId":"536055104569","userId":"user001"},"id":"35192626558","timestamp":1735787431786}
25-01-02.11:10:31.843 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"data":{"awardConfig":"0.01,1","awardId":101,"awardTitle":"随机积分","orderId":"536055104569","userId":"user001"},"id":"35192626558","timestamp":1735787431786}
25-01-02.11:10:31.847 [main            ] INFO  RaffleActivityControllerTest - 请求参数：{"activityId":100301,"userId":"user001"}
25-01-02.11:10:31.849 [main            ] INFO  RaffleActivityControllerTest - 测试结果：{"code":"0000","data":{"awardId":101,"awardIndex":1,"awardTitle":"随机积分"},"info":"成功"}
25-01-02.11:10:35.002 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:10:35.004 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:10:40.009 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:10:40.011 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:10:45.001 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:10:45.003 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:10:50.009 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:10:50.011 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:10:55.009 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:10:55.011 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:11:00.011 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:11:00.013 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:11:05.014 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:11:05.016 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:11:10.014 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:11:10.016 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:11:15.015 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:11:15.017 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:11:20.016 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:11:20.018 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:11:25.007 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:11:25.009 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:11:30.012 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:11:30.014 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:11:35.012 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:11:35.014 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:11:40.014 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:11:40.016 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:11:45.013 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:11:45.015 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:11:50.009 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:11:50.011 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:11:55.006 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:11:55.008 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:12:00.013 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:12:00.016 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:12:05.014 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:12:05.016 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:12:10.011 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:12:10.013 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:12:15.006 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:12:15.008 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:12:20.007 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:12:20.009 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:12:25.014 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:12:25.016 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:12:30.012 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:12:30.014 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:12:35.015 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:12:35.017 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:12:40.004 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:12:40.006 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:12:45.004 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:12:45.006 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:12:50.010 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:12:50.013 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:12:55.000 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:12:55.002 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:13:00.011 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:13:00.013 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:13:05.008 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:13:05.010 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:13:10.008 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:13:10.010 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:13:15.014 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:13:15.016 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:13:20.000 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:13:20.002 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:13:25.010 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:13:25.011 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:13:30.002 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:13:30.003 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:13:35.008 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:13:35.009 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:13:40.002 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:13:40.004 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:13:45.002 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:13:45.003 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:13:50.014 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:13:50.016 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
25-01-02.11:13:52.726 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-01-02.11:13:52.742 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-01-02.11:13:52.745 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-01-02.11:13:52.888 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-01-02.11:13:53.227 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-01-02.11:13:53.227 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-01-02.11:13:53.230 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-01-02.11:13:53.231 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-01-02.11:13:53.231 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
